## Термины отрисовки

[Статья №1](https://webformyself.com/rendering-klientskij-csr-vs-rendering-servernyj-ssr-vs-staticheskij-sajt-ssg/)

- **CSR** - Client Side Rendering. Рендеринг на клиенте - это рендеринг приложения в браузере с помощью DOM.
- **SSR** - Server Side Rendering. Рендеринг на сервере - это рендеринг клиентской части приложения на сервере.
- **SSG** - Static Site Generator. Статическая генерация сайтов - это генерация всех HTML страниц приложения в момент сборки.


## Термины приложений

- **MPA** - Multi Page Application. Многостраничные приложения, которые работают по традиционной схеме.
- **SPA** - Single Page Application. Одностраничное приложение - это веб-приложение или веб-сайт, использующий единственный HTML-документ как оболочку для всех веб-страниц и организующий взаимодействие с пользователем через динамически подгружаемые HTML, CSS, JavaScript, обычно посредством AJAX.
- **PWA** - Progressive Web Application. Могут устанавливаться на главный экран смартфона, отправлять push-уведомления и работать в офлайн-режиме.

Incremental Static Regeneration



## MPA (multi-page application)

**MPA** или **Multi Page Application** — это многостраничные приложения, которые работают по традиционной схеме. Это означает, что при каждом незначительном изменении данных или загрузке новой информации страница обновляется. Такие приложения тяжелее, чем одностраничные, поэтому их использование целесообразно только в тех случаях, когда нужно отобразить большое количество контента.

### Преимущества

- Простая SEO оптимизация — можно оптимизировать каждую из страниц приложения под нужные ключевые запросы;
- Привычность для пользователей — за счет простого интерфейса и классической навигации.

### Недостатки

- Тесная связь между бекендом и фронтендом, поэтому их не получается развивать параллельно.
- сложная разработка — требуют использования фреймворков как на стороне клиента, так и на стороне сервера, что увеличивает сроки и бюджет разработки.



## SPA (single-page application)

**SPA** или **Single Page Application** — это одностраничное веб-приложение, которое загружается на одну HTML-страницу. Благодаря динамическому обновлению с помощью JavaScript, во время использования не нужно перезагружать или подгружать дополнительные страницы. На практике это означает, что пользователь видит в браузере весь основной контент, а при прокрутке или переходах на другие страницы, вместо полной перезагрузки нужные элементы просто подгружаются.

В процессе работы пользователю может показаться, что он запустил не веб-сайт, а десктопное приложение, так как оно мгновенно реагирует на все его действия, без задержек и «подвисаний».

Примеры динамических приложений: Gmail, Google Maps, Facebok, GitHub, Meduza.

### Преимущества

- Высокая скорость — все ресурсы загружаются за одну сессию, а во время действий на странице данные просто меняются, что очень экономит время;
- гибкость и отзывчивость пользовательского интерфейса — за счет того, что веб-страница всего одна, проще построить насыщенный интерфейс, хранить сведения о сеансе, управлять состояниями представлений и анимацией;
- упрощенная разработка — код можно начинать писать с файла file://URL, не используя сервер, не нужен отдельный код для рендера страницы на стороне сервера;
- кэширование данных — приложение отправляет всего один запрос, собирает данные, а после этого может функционировать в offline-режиме.

### Недостатки

- Seo оптимизация требует решений в виде серверного рендеринга — из-за того, что контент загружается при помощи технологии AJAX, которая подразумевает динамическое изменение содержания станицы, а для оптимизации важна устойчивость;
- нагрузка на браузер — из-за того, что клиентские фреймворки тяжелые, они довольно долго загружаются;
- необходима поддержка JavaScript — без JS нельзя полноценно пользоваться полным функционалом приложения;
- утечка памяти в Java Script — из-за плохой защиты, SPA больше подвержена действиям злоумышленников и утечке памяти.



## PWA (progressive web application)

Прогрессивные приложения или **Progressive Web Application** взаимодействуют с пользователем, как приложение. Они могут устанавливаться на главный экран смартфона, отправлять push-уведомления и работать в офлайн-режиме.

Пример: Google Docs.

### Преимущества

- Кроссплатформенность — могут работать сразу с несколькими операционными системами;
- высокая скорость работы и возможность запуска и отображения данных в офлайн-режиме с моментальной загрузкой;
- высокая скорость установки;
- быстрая разработка — для создания PWA, не нужен отдельный сайт, достаточно изменить уже существующий.

### Недостатки

Не все браузеры поддерживают основные функции таких приложений (например, Firefox и Edge).

------





## CSR (client side rendering)

**Client Side Rendering** или **Рендеринг на клиенте** - это рендеринг приложения в браузере с помощью DOM.

Сервер отсылает статические HTML и JavaScript файлы на сторону клиента. Затем клиент выполняет все необходимые вызовы API, чтобы получить исходные данные и затем отрисовывает приложение.

**Angular**, **Vue** и **React** используют этот подход.

### Преимущества

- Дешево. Приложениям, использующих CSR подход, не требуется веб-сервер. Можно разместить веб-приложение на любом CDN или статическом файловом хостинге, например Amazon S3.. **Меньше нагрузка на сервер**
- Не требуется полная перезагрузка страницы. Пользователи могут перемещаться по страницам без обращения к серверу, что значительно ускоряет работу сайта. **Быстрая навигация**
- Быстрая отрисовка после первой загрузки
- Отлично подходит для веб-приложений

### Недостатки

- Проблемы с SEO. Несмотря на то, что Google утверждает, что индексирует веб-сайты на JavaScript, они, как правило, ранжируются неправильно. Если ваш сайт загружается слишком долго, он может быть проиндексирован как пустая страница.
- Низкая производительность на мобильных устройствах. CSR может увеличить время загрузки на несколько секунд на более медленных ноутбуках и мобильных устройствах. Это может привести к тому, что пользователи покинут ваш сайт до того, как он загрузится.
- Медленная загрузка. При клиентском рендеринге приложению необходимо дополнительно обращаться к API серверу для отрисовки. Ваш веб-сайт всегда будет загружаться медленнее, чем приложения, использующие SSR или SSG. **Медленная первая загрузка**.



## SSR (server side rendering)

При серверном рендеринге приложения возвращают готовый HTML для отрисовки страницы. Они заранее выполняют все необходимые вызовы API и передают данные в первоначальном запросе.

SSR – наиболее распространенный способ создания сайтов. Недостаток такого подхода заключается в том, что при навигации по сайту постоянно требуется обращаться к серверу. С помощью таких инструментов, как NextJS, можно создавать приложения, используя лучшее из методов CSR и SSR. При таком подходе первая загрузка осуществляется на стороне сервера, а затем на стороне клиента.

React - NEXT.js и RAZZLE;

Angular - Angular Universal;

Vue - NUXT.js

### Преимущества

- Быстрая загрузка. Приложения, использующие SSR подход, загружаются быстрее, чем похожие приложения с СSR подходом. И поскольку сервер берет на себя всю тяжелую работу, такие приложения работают быстрее на медленных устройствах.
- SEO. Возможность настроить поисковую оптимизацию. Гарантирует отличную индексацию страниц и чтение поисковыми механизмами. Google присваивает более высокий рейтинг сайтам, которые загружаются быстрее. У Google и других поисковых систем не возникнет проблем с индексированием веб-сайтов с использованием серверного рендеринга.
- Оптимизация под социальные сети — шеринг в соцсетях, например, в Facebook или Twitter будут отображаться красивые превьюшки с заглавием, картинкой, описанием, это не будет просто ссылкой без ничего (из-за правильно подобранных мета-тегов)

### Недостатки

- Затраты. По сравнению с CSR, серверный рендеринг требует затрат. При каждом обращении к серверу, ему необходимо выполнять вызовы API, а затем отрисовывать HTML перед передачей его клиенту.
- Более сложная разработка. Самостоятельная настройка рендеринга на стороне сервера с помощью React может быть сложной задачей. Однако ее можно упростить, если работать с фреймворком NextJS.
- TTFB (time to first byte) будет медленнее. Это одна из метрик производительности веб-страницы, которая описывает время, которое прошло с момента отправления браузером запроса страницей до получения первого байта информации от сервера. Вместо того чтобы отправить практически пустой HTML документ со ссылками на JavaScript (как в случае с отрисовкой на стороне клиента), серверу нужно будет какое-то время для подготовки HTML для вашей страницы.
- Сервер будет более занят и будет обрабатывать меньше запросов в секунду. Когда мы добавляем отрисовку контента на сторону сервера, пропускная способность сервера уменьшится.



## **SSG** (static site generators)

SSG генерирует все HTML-файлы во время сборки. Сервер выполняет вызовы API и генерирует статические HTML-файлы для каждой страницы сайта. Когда клиент запрашивает одну из веб-страниц, серверу не нужно выполнять вызов API или отрисовывать HTML, ему нужно только вернуть предварительно обработанный HTML-файл.

[Gatsby](https://www.gatsbyjs.com/) и [NextJS](https://nextjs.org/) — популярные способы создания статических сайтов с помощью React. Hugo — еще один [пример](https://gohugo.io/about/what-is-hugo/) популярных статических генераторов сайтов.

### Преимущества

- Быстрота загрузки. Поскольку HTML уже скомпилирован и готов к работе, статический сайт загружается быстрее, чем сайты, использующие CSR или SSR подходы.
- Дешево. При SSG подходе веб-сайт состоит из множества разных HTML-файлов. Вы можете разместить сайт на любой службе статического файлового хостинга, например S3, или использовать CDN.

### Недостатки

- Плохое масштабирование. По мере роста сайта будет увеличиваться и время сборки. Это может привести к замедлению сборки веб-сайтов с большим количеством изменяющихся страниц. SSG лучше всего подходит для сайтов с неизменяемыми данными, например, блогов, и хуже для сайтов с постоянно меняющимися данными, например для магазинов.











------



- Для SEO в мире SPA существует SSR (Server side rendering).
  Если кратко, то когда пользователь впервые обращается к сайту, то на стороне сервера делаются все необходимые запросы к API для получения данных + "раскрывается" вся html, выполняется еще куча различных действий и в итоге на клиент улетает уже развернутая html, со всеми необходимыми данными, а дальше web-приложение начинает работать как обычное SPA.

- Производительность при первой инициализации сайта на стороне клиента (без использования SSR) действительно будет уступать многостраничным (MPA) приложением, но когда дела доходит до роутинга (переходам по страницам) выбору фильтров, оформления покупки и т.д. (AJAX), то SPA в десятки раз выигрывает по производительности у MPA приложений, т.к. время на отрисовку при каждом действии всей страницы (как в MPA) требуется гораздо больше, нежели чем SPA приложению (т.к. перерисовывается только то, что изменилось и не более того). Стоит помнить, что самая дорогая операция в вебе - это рендер / отрисовка

  А если же использовать SPA + SSR, то MPA приложения проигрывают по производительности практически во всех аспектах.

  Так же, с помощью SSR мы можем реализовывать следующую технику: загружать только те части js / css, которые необходимы для работы конкретного компонента.

- Утечка памяти: если над SPA приложением работает (ют) квалифицированные разработчики, то я на 99.8% уверен в том, что подобной проблемы не возникнет, т.к. методы / тулзы для профилирования (анализа работы приложения) уже давным-давно вышли на новый уровень и сейчас не эпоха ie6, где люди дебажили (искали баги / ошибки) с помощью alert's. И непонятно, почему этот пункт отнесся именно к SPA, ведь в любом приложении, где есть хоть какая-то логика, может возникнуть подобная ситуация?

- Поддержка js - я хз, но мы сейчас не в 2001 году, и я никогда (на основе личного опыта) не видел подобных людей, у которых был бы отключен js (исключение - это Opera Mini или всякие proxy browser, доля которых 0.0001% (наобум)), да даже в том же Tor Browser уже по умолчанию включен js (просто знаю).
  В дополнении к этому, могу сказать, что для этого в мире SPA, и не только - существует специальная техника, которая называется Graceful Degradation (можно так же посмотреть в сторону Progressive Enhancement, как делает VK и многие другие популярные платформы).